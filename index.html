<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–ª–∏–∫–µ—Ä</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: #f5f5f5;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            user-select: none;
        }

        .content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        .page { display: none; }
        .page.active { display: block; }

        .balance {
            text-align: center;
            padding: 15px;
            background: white;
            position: sticky;
            top: 0;
            z-index: 1;
            font-size: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .clicker-btn {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            border: none;
            background: #007aff;
            color: white;
            font-size: 24px;
            cursor: pointer;
            margin: 20px auto;
            display: block;
            transition: transform 0.1s;
            position: relative;
        }

        .clicker-btn:active { transform: scale(0.95); }

        .coin-animation {
            position: absolute;
            font-size: 20px;
            color: gold;
            animation: coinRise 1s ease-out forwards;
        }

        @keyframes coinRise {
            0% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(-50px); }
        }

        .shop-item {
            display: flex;
            padding: 10px;
            margin: 10px;
            background: white;
            border-radius: 10px;
            gap: 15px;
            align-items: center;
            justify-content: space-between;
        }

        .shop-item button {
            padding: 5px 15px;
            background: #007aff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .rating-item {
            padding: 10px;
            background: white;
            margin: 5px 0;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
        }

        .bottom-nav {
            position: fixed;
            bottom: 0;
            width: 100%;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            border-top: 1px solid #e0e0e0;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
        }

        .nav-item {
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .nav-item.active { transform: scale(1.1); }
        .icon { display: block; font-size: 24px; }
        .label { display: block; font-size: 12px; color: #666; }
        .nav-item.active .label { color: #007aff; }

        .achievement {
            padding: 10px;
            margin: 5px;
            background: #e0ffe0;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="content">
        <div id="home" class="page active">
            <div class="balance">–ë–∞–ª–∞–Ω—Å: <span id="money">0</span> üí∞</div>
            <button class="clicker-btn" id="clicker">+<span id="clickValue">1</span></button>
            <div id="achievements">
                <div class="achievement">–î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ: 100 –∫–ª–∏–∫–æ–≤</div>
            </div>
            <button id="dailyBonus">–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–æ–Ω—É—Å</button>
        </div>
        <div id="shop" class="page">
            <div class="shop-item">
                <span>üñ±Ô∏è –£–ª—É—á—à–µ–Ω–∏–µ –∫–ª–∏–∫–∞</span>
                <span>–¶–µ–Ω–∞: <span class="price">50</span> üí∞</span>
                <button data-upgrade="click">–ö—É–ø–∏—Ç—å</button>
            </div>
            <div class="shop-item">
                <span>ü§ñ –ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä</span>
                <span>–¶–µ–Ω–∞: <span class="price">100</span> üí∞</span>
                <button data-upgrade="auto">–ö—É–ø–∏—Ç—å</button>
            </div>
            <div class="shop-item">
                <span>‚ú® –ë—É—Å—Ç–µ—Ä x2 (30 –º–∏–Ω)</span>
                <span>–¶–µ–Ω–∞: <span class="price">200</span> üí∞</span>
                <button data-upgrade="boost">–ö—É–ø–∏—Ç—å</button>
            </div>
        </div>
        <div id="reit" class="page">
            <div class="rating-list">
                <div class="rating-item"><span>1. –ò–≥—Ä–æ–∫1</span><span>1000 üí∞</span></div>
                <div class="rating-item"><span>2. –ò–≥—Ä–æ–∫2</span><span>800 üí∞</span></div>
                <div class="rating-item"><span>3. –í—ã</span><span id="yourRating">0 üí∞</span></div>
            </div>
            <button id="shareRating">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
        </div>
        <div id="settings" class="page">
            <button id="reset">–°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å</button>
            <button id="sound">–ó–≤—É–∫: –í–∫–ª</button>
            <button id="invite">–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–≥–∞</button>
            <div>–†–µ—Ñ–µ—Ä–∞–ª–æ–≤: <span id="referrals">0</span></div>
            <div>–í–µ—Ä—Å–∏—è: 1.0.0</div>
        </div>
    </div>
    <nav class="bottom-nav">
        <div class="nav-item" data-page="shop">
            <span class="icon">üõí</span>
            <span class="label">–ú–∞–≥–∞–∑–∏–Ω</span>
        </div>
        <div class="nav-item active" data-page="home">
            <span class="icon">üéÆ</span>
            <span class="label">–ò–≥—Ä–∞</span>
        </div>        
        <div class="nav-item" data-page="reit">
            <span class="icon">üèÜ</span>
            <span class="label">–†–µ–π—Ç–∏–Ω–≥</span>
        </div>
        <div class="nav-item" data-page="settings">
            <span class="icon">‚öôÔ∏è</span>
            <span class="label">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
        </div>
    </nav>
    <script>
        Telegram.WebApp.ready();
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–º—ã
        document.body.style.backgroundColor = Telegram.WebApp.themeParams.bg_color || '#f5f5f5';

        // –ò–≥—Ä–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let gameState = {
            money: 0,
            clickValue: 1,
            autoClick: 0,
            boostMultiplier: 1,
            boostTime: 0,
            clicks: 0,
            referrals: 0,
            sound: true,
            lastBonus: 0
        };

        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
        const moneyDisplay = document.getElementById('money');
        const clicker = document.getElementById('clicker');
        const clickValueDisplay = document.getElementById('clickValue');
        const yourRating = document.getElementById('yourRating');

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π
        loadGame();

        // –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∏–∫–µ—Ä
        clicker.addEventListener('click', () => {
            gameState.clicks++;
            const earnings = gameState.clickValue * gameState.boostMultiplier;
            gameState.money += earnings;
            updateDisplay();
            createCoinAnimation(earnings);
            Telegram.WebApp.HapticFeedback.impactOccurred('medium');
            checkAchievements();
        });

        // –ê–Ω–∏–º–∞—Ü–∏—è –º–æ–Ω–µ—Ç
        function createCoinAnimation(amount) {
            const coin = document.createElement('span');
            coin.textContent = `+${amount}`;
            coin.className = 'coin-animation';
            coin.style.left = `${Math.random() * 100}px`;
            clicker.appendChild(coin);
            setTimeout(() => coin.remove(), 1000);
        }

        // –ù–∞–≤–∏–≥–∞—Ü–∏—è
        const navItems = document.querySelectorAll('.nav-item');
        const pages = document.querySelectorAll('.page');
        navItems.forEach(item => {
            item.addEventListener('click', () => {
                const pageId = item.getAttribute('data-page');
                navItems.forEach(nav => nav.classList.remove('active'));
                pages.forEach(page => page.classList.remove('active'));
                item.classList.add('active');
                document.getElementById(pageId).classList.add('active');
                Telegram.WebApp.HapticFeedback.impactOccurred('light');
            });
        });

        // –ú–∞–≥–∞–∑–∏–Ω
        const shopButtons = document.querySelectorAll('.shop-item button');
        shopButtons.forEach(button => {
            button.addEventListener('click', () => {
                const upgrade = button.getAttribute('data-upgrade');
                const price = parseInt(button.previousElementSibling.querySelector('.price').textContent);
                
                if (gameState.money >= price) {
                    gameState.money -= price;
                    if (upgrade === 'click') gameState.clickValue += 1;
                    if (upgrade === 'auto') gameState.autoClick += 1;
                    if (upgrade === 'boost') {
                        gameState.boostMultiplier = 2;
                        gameState.boostTime = Date.now() + 30 * 60 * 1000;
                    }
                    updateDisplay();
                    saveGame();
                    Telegram.WebApp.showAlert(`–ö—É–ø–ª–µ–Ω–æ: ${button.parentElement.firstElementChild.textContent}`);
                } else {
                    Telegram.WebApp.showAlert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤!');
                }
            });
        });

        // –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–æ–Ω—É—Å
        document.getElementById('dailyBonus').addEventListener('click', () => {
            const now = Date.now();
            if (now - gameState.lastBonus >= 24 * 60 * 60 * 1000) {
                gameState.money += 100;
                gameState.lastBonus = now;
                updateDisplay();
                saveGame();
                Telegram.WebApp.showAlert('–ü–æ–ª—É—á–µ–Ω –±–æ–Ω—É—Å: 100 üí∞');
            } else {
                Telegram.WebApp.showAlert('–ë–æ–Ω—É—Å –¥–æ—Å—Ç—É–ø–µ–Ω —Ä–∞–∑ –≤ 24 —á–∞—Å–∞!');
            }
        });

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∏
        document.getElementById('reset').addEventListener('click', () => {
            Telegram.WebApp.showConfirm('–°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å?', (confirmed) => {
                if (confirmed) {
                    gameState = { money: 0, clickValue: 1, autoClick: 0, boostMultiplier: 1, boostTime: 0, clicks: 0, referrals: 0, sound: true, lastBonus: 0 };
                    updateDisplay();
                    saveGame();
                }
            });
        });

        document.getElementById('sound').addEventListener('click', (e) => {
            gameState.sound = !gameState.sound;
            e.target.textContent = `–ó–≤—É–∫: ${gameState.sound ? '–í–∫–ª' : '–í—ã–∫–ª'}`;
            saveGame();
        });

        document.getElementById('invite').addEventListener('click', () => {
            Telegram.WebApp.showAlert('–ü—Ä–∏–≥–ª–∞—à–∞–π—Ç–µ –¥—Ä—É–∑–µ–π –ø–æ —Å—Å—ã–ª–∫–µ: t.me/yourbot?start=ref123');
            gameState.referrals++;
            gameState.money += 50;
            updateDisplay();
            saveGame();
        });

        document.getElementById('shareRating').addEventListener('click', () => {
            Telegram.WebApp.openTelegramLink(`https://t.me/share/url?url=–ú–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –∫–ª–∏–∫–µ—Ä–µ: ${gameState.money} üí∞!`);
        });

        // –ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä –∏ –±—É—Å—Ç–µ—Ä
        setInterval(() => {
            gameState.money += gameState.autoClick * gameState.boostMultiplier;
            if (gameState.boostTime && Date.now() > gameState.boostTime) {
                gameState.boostMultiplier = 1;
                gameState.boostTime = 0;
            }
            updateDisplay();
            saveGame();
        }, 1000);

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
        function updateDisplay() {
            moneyDisplay.textContent = Math.floor(gameState.money);
            clickValueDisplay.textContent = gameState.clickValue * gameState.boostMultiplier;
            yourRating.textContent = `${Math.floor(gameState.money)} üí∞`;
            document.getElementById('referrals').textContent = gameState.referrals;
        }

        // –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
        function checkAchievements() {
            if (gameState.clicks === 100) {
                document.getElementById('achievements').innerHTML += '<div class="achievement">–î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ: 100 –∫–ª–∏–∫–æ–≤!</div>';
                gameState.money += 50;
            }
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∑–∞–≥—Ä—É–∑–∫–∞
        function saveGame() {
            localStorage.setItem('clickerGame', JSON.stringify(gameState));
        }

        function loadGame() {
            const saved = localStorage.getItem('clickerGame');
            if (saved) gameState = JSON.parse(saved);
            updateDisplay();
        }
    </script>
</body>
</html>
